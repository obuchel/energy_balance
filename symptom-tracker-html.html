<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Long COVID Symptom Tracker</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            background: rgba(255, 255, 255, 0.95);
            padding: 2.5rem;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        .header p {
            font-size: 1.1rem;
            color: #666;
            max-width: 600px;
            margin: 0 auto;
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .date-control {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: rgba(255, 255, 255, 0.95);
            padding: 1.5rem;
            border-radius: 16px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .date-input {
            padding: 0.75rem 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .date-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .view-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            padding: 0.5rem;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            gap: 0.5rem;
        }

        .view-tab {
            flex: 1;
            padding: 1rem;
            border: none;
            background: transparent;
            border-radius: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #666;
        }

        .view-tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .wellbeing-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .wellbeing-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .rating-scale {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .rating-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .rating-btn {
            width: 3rem;
            height: 3rem;
            border: 2px solid #e5e7eb;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .rating-btn:hover {
            transform: scale(1.1);
            border-color: #fbbf24;
        }

        .rating-btn.active {
            background: #fbbf24;
            border-color: #f59e0b;
            color: white;
            box-shadow: 0 4px 15px rgba(251, 191, 36, 0.3);
        }

        .symptom-category {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .category-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .symptoms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .symptom-card {
            border: 2px solid #e5e7eb;
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            background: white;
        }

        .symptom-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
        }

        .symptom-header {
            margin-bottom: 1rem;
        }

        .symptom-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 0.25rem;
        }

        .symptom-description {
            font-size: 0.9rem;
            color: #666;
        }

        .severity-indicator {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            margin-bottom: 1rem;
        }

        .severity-none { background: #f3f4f6; color: #6b7280; }
        .severity-mild { background: #dcfce7; color: #166534; }
        .severity-mild-moderate { background: #fef3c7; color: #d97706; }
        .severity-moderate { background: #fed7aa; color: #ea580c; }
        .severity-moderate-severe { background: #fecaca; color: #dc2626; }
        .severity-severe { background: #fca5a5; color: #991b1b; }

        .severity-controls {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .severity-btn {
            padding: 0.5rem;
            border: none;
            background: #f3f4f6;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #6b7280;
        }

        .severity-btn:hover {
            background: #e5e7eb;
            transform: scale(1.1);
        }

        .severity-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .severity-dots {
            display: flex;
            gap: 0.25rem;
        }

        .severity-dot {
            width: 1.5rem;
            height: 1.5rem;
            border: 2px solid #e5e7eb;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .severity-dot:hover {
            border-color: #9ca3af;
        }

        .severity-dot.active {
            background: #667eea;
            border-color: #4f46e5;
        }

        .notes-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .notes-textarea {
            width: 100%;
            height: 8rem;
            padding: 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            resize: none;
            font-family: inherit;
            transition: border-color 0.3s ease;
        }

        .notes-textarea:focus {
            outline: none;
            border-color: #8b5cf6;
        }

        .weekly-overview {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .week-day {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border: 2px solid #f3f4f6;
            border-radius: 12px;
            margin-bottom: 0.75rem;
            transition: all 0.3s ease;
        }

        .week-day:hover {
            background: #f9fafb;
            border-color: #e5e7eb;
        }

        .day-date {
            min-width: 120px;
            font-weight: 500;
        }

        .day-info {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 0.9rem;
            color: #666;
        }

        .wellbeing-dots {
            display: flex;
            gap: 0.25rem;
        }

        .wellbeing-dot {
            width: 2rem;
            height: 1rem;
            border-radius: 4px;
        }

        .wellbeing-dot.active {
            background: #fbbf24;
        }

        .wellbeing-dot.inactive {
            background: #e5e7eb;
        }

        .view-btn {
            padding: 0.5rem 1rem;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .view-btn:hover {
            background: #5b21b6;
            transform: translateY(-1px);
        }

        .top-symptoms {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .symptom-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border: 2px solid #f3f4f6;
            border-radius: 12px;
            margin-bottom: 0.75rem;
        }

        .symptom-info h4 {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .symptom-category-name {
            font-size: 0.85rem;
            color: #666;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .controls {
                flex-direction: column;
            }

            .symptoms-grid {
                grid-template-columns: 1fr;
            }

            .rating-scale {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.75rem;
            }

            .severity-controls {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>📊 Long COVID Symptom Tracker</h1>
            <p>Track your symptoms daily to identify patterns and monitor your recovery progress</p>
        </div>

        <!-- Controls -->
        <div class="controls">
            <div class="date-control">
                <span>📅</span>
                <label for="date-input" style="font-weight: 500;">Select Date:</label>
                <input type="date" id="date-input" class="date-input">
            </div>

            <div class="view-tabs">
                <button class="view-tab active" data-view="daily">📅 Daily Entry</button>
                <button class="view-tab" data-view="weekly">📊 Weekly View</button>
                <button class="view-tab" data-view="trends">📈 Trends</button>
            </div>
        </div>

        <!-- Daily View -->
        <div id="daily-view">
            <!-- Overall Wellbeing -->
            <div class="wellbeing-card">
                <h2 class="wellbeing-title">
                    <span>⭐</span>
                    Overall Wellbeing Today
                </h2>
                <div class="rating-scale">
                    <span>Poor</span>
                    <div class="rating-buttons" id="wellbeing-buttons">
                        <button class="rating-btn" data-rating="1">1</button>
                        <button class="rating-btn" data-rating="2">2</button>
                        <button class="rating-btn active" data-rating="3">3</button>
                        <button class="rating-btn" data-rating="4">4</button>
                        <button class="rating-btn" data-rating="5">5</button>
                    </div>
                    <span>Great</span>
                </div>
            </div>

            <!-- Neurological Symptoms -->
            <div class="symptom-category">
                <h3 class="category-title">
                    <span>🧠</span>
                    Neurological
                </h3>
                <div class="symptoms-grid">
                    <div class="symptom-card" data-symptom="brain_fog">
                        <div class="symptom-header">
                            <h4 class="symptom-name">Brain Fog</h4>
                            <p class="symptom-description">Difficulty concentrating, memory issues</p>
                        </div>
                        <div class="severity-indicator severity-none">None</div>
                        <div class="severity-controls">
                            <button class="severity-btn" data-action="decrease">➖</button>
                            <div class="severity-dots">
                                <div class="severity-dot" data-level="1"></div>
                                <div class="severity-dot" data-level="2"></div>
                                <div class="severity-dot" data-level="3"></div>
                                <div class="severity-dot" data-level="4"></div>
                                <div class="severity-dot" data-level="5"></div>
                            </div>
                            <button class="severity-btn" data-action="increase">➕</button>
                        </div>
                    </div>

                    <div class="symptom-card" data-symptom="headache">
                        <div class="symptom-header">
                            <h4 class="symptom-name">Headache</h4>
                            <p class="symptom-description">Head pain, pressure, tension</p>
                        </div>
                        <div class="severity-indicator severity-none">None</div>
                        <div class="severity-controls">
                            <button class="severity-btn" data-action="decrease">➖</button>
                            <div class="severity-dots">
                                <div class="severity-dot" data-level="1"></div>
                                <div class="severity-dot" data-level="2"></div>
                                <div class="severity-dot" data-level="3"></div>
                                <div class="severity-dot" data-level="4"></div>
                                <div class="severity-dot" data-level="5"></div>
                            </div>
                            <button class="severity-btn" data-action="increase">➕</button>
                        </div>
                    </div>

                    <div class="symptom-card" data-symptom="dizziness">
                        <div class="symptom-header">
                            <h4 class="symptom-name">Dizziness</h4>
                            <p class="symptom-description">Lightheadedness, vertigo</p>
                        </div>
                        <div class="severity-indicator severity-none">None</div>
                        <div class="severity-controls">
                            <button class="severity-btn" data-action="decrease">➖</button>
                            <div class="severity-dots">
                                <div class="severity-dot" data-level="1"></div>
                                <div class="severity-dot" data-level="2"></div>
                                <div class="severity-dot" data-level="3"></div>
                                <div class="severity-dot" data-level="4"></div>
                                <div class="severity-dot" data-level="5"></div>
                            </div>
                            <button class="severity-btn" data-action="increase">➕</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Energy & Fatigue -->
            <div class="symptom-category">
                <h3 class="category-title">
                    <span>⚡</span>
                    Energy & Fatigue
                </h3>
                <div class="symptoms-grid">
                    <div class="symptom-card" data-symptom="fatigue">
                        <div class="symptom-header">
                            <h4 class="symptom-name">General Fatigue</h4>
                            <p class="symptom-description">Overall tiredness, lack of energy</p>
                        </div>
                        <div class="severity-indicator severity-none">None</div>
                        <div class="severity-controls">
                            <button class="severity-btn" data-action="decrease">➖</button>
                            <div class="severity-dots">
                                <div class="severity-dot" data-level="1"></div>
                                <div class="severity-dot" data-level="2"></div>
                                <div class="severity-dot" data-level="3"></div>
                                <div class="severity-dot" data-level="4"></div>
                                <div class="severity-dot" data-level="5"></div>
                            </div>
                            <button class="severity-btn" data-action="increase">➕</button>
                        </div>
                    </div>

                    <div class="symptom-card" data-symptom="pem">
                        <div class="symptom-header">
                            <h4 class="symptom-name">Post-Exertional Malaise</h4>
                            <p class="symptom-description">Worsening after activity</p>
                        </div>
                        <div class="severity-indicator severity-none">None</div>
                        <div class="severity-controls">
                            <button class="severity-btn" data-action="decrease">➖</button>
                            <div class="severity-dots">
                                <div class="severity-dot" data-level="1"></div>
                                <div class="severity-dot" data-level="2"></div>
                                <div class="severity-dot" data-level="3"></div>
                                <div class="severity-dot" data-level="4"></div>
                                <div class="severity-dot" data-level="5"></div>
                            </div>
                            <button class="severity-btn" data-action="increase">➕</button>
                        </div>
                    </div>

                    <div class="symptom-card" data-symptom="sleep_issues">
                        <div class="symptom-header">
                            <h4 class="symptom-name">Sleep Problems</h4>
                            <p class="symptom-description">Insomnia, poor sleep quality</p>
                        </div>
                        <div class="severity-indicator severity-none">None</div>
                        <div class="severity-controls">
                            <button class="severity-btn" data-action="decrease">➖</button>
                            <div class="severity-dots">
                                <div class="severity-dot" data-level="1"></div>
                                <div class="severity-dot" data-level="2"></div>
                                <div class="severity-dot" data-level="3"></div>
                                <div class="severity-dot" data-level="4"></div>
                                <div class="severity-dot" data-level="5"></div>
                            </div>
                            <button class="severity-btn" data-action="increase">➕</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cardiovascular -->
            <div class="symptom-category">
                <h3 class="category-title">
                    <span>❤️</span>
                    Cardiovascular
                </h3>
                <div class="symptoms-grid">
                    <div class="symptom-card" data-symptom="pots">
                        <div class="symptom-header">
                            <h4 class="symptom-name">POTS Symptoms</h4>
                            <p class="symptom-description">Heart rate spikes when standing</p>
                        </div>
                        <div class="severity-indicator severity-none">None</div>
                        <div class="severity-controls">
                            <button class="severity-btn" data-action="decrease">➖</button>
                            <div class="severity-dots">
                                <div class="severity-dot" data-level="1"></div>
                                <div class="severity-dot" data-level="2"></div>
                                <div class="severity-dot" data-level="3"></div>
                                <div class="severity-dot" data-level="4"></div>
                                <div class="severity-dot" data-level="5"></div>
                            </div>
                            <button class="severity-btn" data-action="increase">➕</button>
                        </div>
                    </div>

                    <div class="symptom-card" data-symptom="chest_pain">
                        <div class="symptom-header">
                            <h4 class="symptom-name">Chest Pain</h4>
                            <p class="symptom-description">Chest discomfort, tightness</p>
                        </div>
                        <div class="severity-indicator severity-none">None</div>
                        <div class="severity-controls">
                            <button class="severity-btn" data-action="decrease">➖</button>
                            <div class="severity-dots">
                                <div class="severity-dot" data-level="1"></div>
                                <div class="severity-dot" data-level="2"></div>
                                <div class="severity-dot" data-level="3"></div>
                                <div class="severity-dot" data-level="4"></div>
                                <div class="severity-dot" data-level="5"></div>
                            </div>
                            <button class="severity-btn" data-action="increase">➕</button>
                        </div>
                    </div>

                    <div class="symptom-card" data-symptom="palpitations">
                        <div class="symptom-header">
                            <h4 class="symptom-name">Heart Palpitations</h4>
                            <p class="symptom-description">Irregular heartbeat</p>
                        </div>
                        <div class="severity-indicator severity-none">None</div>
                        <div class="severity-controls">
                            <button class="severity-btn" data-action="decrease">➖</button>
                            <div class="severity-dots">
                                <div class="severity-dot" data-level="1"></div>
                                <div class="severity-dot" data-level="2"></div>
                                <div class="severity-dot" data-level="3"></div>
                                <div class="severity-dot" data-level="4"></div>
                                <div class="severity-dot" data-level="5"></div>
                            </div>
                            <button class="severity-btn" data-action="increase">➕</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notes Section -->
            <div class="notes-section">
                <h3 class="category-title">
                    <span>🗒️</span>
                    Daily Notes
                </h3>
                <textarea 
                    id="daily-notes" 
                    class="notes-textarea" 
                    placeholder="How are you feeling today? Any triggers, improvements, or patterns you've noticed?"
                ></textarea>
            </div>
        </div>

        <!-- Weekly View -->
        <div id="weekly-view" class="hidden">
            <div class="weekly-overview">
                <h2 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 2rem;">Weekly Overview</h2>
                <div id="weekly-data">
                    <!-- Weekly data will be populated here -->
                </div>
            </div>
        </div>

        <!-- Trends View -->
        <div id="trends-view" class="hidden">
            <div class="top-symptoms">
                <h2 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 2rem;">Most Problematic Symptoms Today</h2>
                <div id="top-symptoms-list">
                    <div class="symptom-item">
                        <div class="symptom-info">
                            <h4>No symptoms reported</h4>
                            <div class="symptom-category-name">Start tracking to see trends</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="weekly-overview">
                <h2 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 2rem;">Weekly Wellbeing Trend</h2>
                <div id="wellbeing-trend">
                    <!-- Wellbeing trend will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // State management
        let currentDate = new Date().toISOString().split('T')[0];
        let symptomData = {};
        let currentView = 'daily';

        const severityLevels = [
            { value: 0, label: 'None', class: 'severity-none' },
            { value: 1, label: 'Mild', class: 'severity-mild' },
            { value: 2, label: 'Mild-Moderate', class: 'severity-mild-moderate' },
            { value: 3, label: 'Moderate', class: 'severity-moderate' },
            { value: 4, label: 'Moderate-Severe', class: 'severity-moderate-severe' },
            { value: 5, label: 'Severe', class: 'severity-severe' }
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('date-input').value = currentDate;
            setupEventListeners();
            loadDayData();
            updateViews();
        });

        function setupEventListeners() {
            // Date input
            document.getElementById('date-input').addEventListener('change', function(e) {
                saveDayData();
                currentDate = e.target.value;
                loadDayData();
                updateViews();
            });

            // View tabs
            document.querySelectorAll('.view-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.view-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    currentView = this.dataset.view;
                    updateViews();
                });
            });

            // Wellbeing rating
            document.querySelectorAll('#wellbeing-buttons .rating-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('#wellbeing-buttons .rating-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    updateWellbeing(parseInt(this.dataset.rating));
                });
            });

            // Symptom controls
            document.querySelectorAll('.symptom-card').forEach(card => {
                const symptomId = card.dataset.symptom;
                
                // Severity dots
                card.querySelectorAll('.severity-dot').forEach(dot => {
                    dot.addEventListener('click', function() {
                        const level = parseInt(this.dataset.level);
                        updateSymptom(symptomId, level);
                        updateSymptomDisplay(card, level);
                    });
                });

                // Increase/decrease buttons
                card.querySelectorAll('.severity-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const action = this.dataset.action;
                        const currentLevel = getCurrentSymptomLevel(symptomId);
                        let newLevel = currentLevel;
                        
                        if (action === 'increase' && currentLevel < 5) {
                            newLevel = currentLevel + 1;
                        } else if (action === 'decrease' && currentLevel > 0) {
                            newLevel = currentLevel - 1;
                        }
                        
                        if (newLevel !== currentLevel) {
                            updateSymptom(symptomId, newLevel);
                            updateSymptomDisplay(card, newLevel);
                        }
                    });
                });
            });

            // Notes
            document.getElementById('daily-notes').addEventListener('input', function() {
                updateNotes(this.value);
            });
        }

        function getSymptomEntry(date) {
            if (!symptomData[date]) {
                symptomData[date] = {
                    symptoms: {},
                    notes: '',
                    overallWellbeing: 3,
                    timestamp: new Date().toISOString()
                };
            }
            return symptomData[date];
        }

        function updateSymptom(symptomId, severity) {
            const entry = getSymptomEntry(currentDate);
            entry.symptoms[symptomId] = severity;
            saveData();
        }

        function updateWellbeing(rating) {
            const entry = getSymptomEntry(currentDate);
            entry.overallWellbeing = rating;
            saveData();
        }

        function updateNotes(notes) {
            const entry = getSymptomEntry(currentDate);
            entry.notes = notes;
            saveData();
        }

        function getCurrentSymptomLevel(symptomId) {
            const entry = getSymptomEntry(currentDate);
            return entry.symptoms[symptomId] || 0;
        }

        function updateSymptomDisplay(card, level) {
            const indicator = card.querySelector('.severity-indicator');
            const dots = card.querySelectorAll('.severity-dot');
            const severityInfo = severityLevels[level];
            
            indicator.textContent = severityInfo.label;
            indicator.className = `severity-indicator ${severityInfo.class}`;
            
            dots.forEach((dot, index) => {
                if (index < level) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }

        function loadDayData() {
            const entry = getSymptomEntry(currentDate);
            
            // Load wellbeing
            document.querySelectorAll('#wellbeing-buttons .rating-btn').forEach(btn => {
                if (parseInt(btn.dataset.rating) === entry.overallWellbeing) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
            
            // Load symptoms
            document.querySelectorAll('.symptom-card').forEach(card => {
                const symptomId = card.dataset.symptom;
                const level = entry.symptoms[symptomId] || 0;
                updateSymptomDisplay(card, level);
            });
            
            // Load notes
            document.getElementById('daily-notes').value = entry.notes || '';
        }

        function saveDayData() {
            saveData();
        }

        function saveData() {
            // Data is automatically saved in memory
            // In a real application, this would save to localStorage or a database
            console.log('Symptom data updated:', symptomData);
        }

        function updateViews() {
            // Hide all views
            document.getElementById('daily-view').classList.add('hidden');
            document.getElementById('weekly-view').classList.add('hidden');
            document.getElementById('trends-view').classList.add('hidden');
            
            // Show current view
            document.getElementById(`${currentView}-view`).classList.remove('hidden');
            
            if (currentView === 'weekly') {
                updateWeeklyView();
            } else if (currentView === 'trends') {
                updateTrendsView();
            }
        }

        function updateWeeklyView() {
            const weeklyData = document.getElementById('weekly-data');
            const days = getWeeklyData();
            
            weeklyData.innerHTML = days.map(day => {
                const symptomCount = Object.values(day.entry.symptoms || {}).filter(s => s > 0).length;
                const avgSeverity = Object.values(day.entry.symptoms || {}).length > 0
                    ? (Object.values(day.entry.symptoms || {}).reduce((sum, val) => sum + val, 0) / Object.values(day.entry.symptoms || {}).length).toFixed(1)
                    : 0;
                
                return `
                    <div class="week-day">
                        <div class="day-date">${day.displayDate}</div>
                        <div class="day-info">
                            <div class="wellbeing-dots">
                                ${[1,2,3,4,5].map(level => `
                                    <div class="wellbeing-dot ${day.entry.overallWellbeing >= level ? 'active' : 'inactive'}"></div>
                                `).join('')}
                            </div>
                            <span>Wellbeing: ${day.entry.overallWellbeing}/5</span>
                            <span>${symptomCount} symptoms</span>
                            ${avgSeverity > 0 ? `<span>Avg: ${avgSeverity}</span>` : ''}
                        </div>
                        <button class="view-btn" onclick="viewDay('${day.date}')">View</button>
                    </div>
                `;
            }).join('');
        }

        function updateTrendsView() {
            const topSymptoms = getTopSymptoms();
            const topSymptomsContainer = document.getElementById('top-symptoms-list');
            
            if (topSymptoms.length === 0) {
                topSymptomsContainer.innerHTML = `
                    <div class="symptom-item">
                        <div class="symptom-info">
                            <h4>No symptoms reported today</h4>
                            <div class="symptom-category-name">Start tracking to see trends</div>
                        </div>
                    </div>
                `;
            } else {
                topSymptomsContainer.innerHTML = topSymptoms.map(symptom => {
                    const severityInfo = severityLevels[symptom.severity];
                    return `
                        <div class="symptom-item">
                            <div class="symptom-info">
                                <h4>${symptom.name}</h4>
                                <div class="symptom-category-name">${symptom.category}</div>
                            </div>
                            <span class="severity-indicator ${severityInfo.class}">${severityInfo.label}</span>
                        </div>
                    `;
                }).join('');
            }
            
            // Update wellbeing trend
            const wellbeingTrend = document.getElementById('wellbeing-trend');
            const days = getWeeklyData();
            
            wellbeingTrend.innerHTML = days.map(day => `
                <div class="week-day">
                    <div class="day-date" style="min-width: 100px; font-size: 0.9rem;">${day.displayDate}</div>
                    <div class="day-info">
                        <div class="wellbeing-dots">
                            ${[1,2,3,4,5].map(level => `
                                <div class="wellbeing-dot ${day.entry.overallWellbeing >= level ? 'active' : 'inactive'}"></div>
                            `).join('')}
                        </div>
                        <span>${day.entry.overallWellbeing}/5</span>
                    </div>
                </div>
            `).join('');
        }

        function getWeeklyData() {
            const data = [];
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                const dateStr = date.toISOString().split('T')[0];
                const entry = symptomData[dateStr] || { symptoms: {}, overallWellbeing: 3 };
                data.push({
                    date: dateStr,
                    displayDate: date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' }),
                    entry: entry
                });
            }
            return data;
        }

        function getTopSymptoms() {
            const entry = getSymptomEntry(currentDate);
            const symptoms = Object.entries(entry.symptoms)
                .filter(([_, severity]) => severity > 0)
                .sort(([_, a], [__, b]) => b - a)
                .slice(0, 5);
            
            const symptomNames = {
                brain_fog: { name: 'Brain Fog', category: 'Neurological' },
                headache: { name: 'Headache', category: 'Neurological' },
                dizziness: { name: 'Dizziness', category: 'Neurological' },
                fatigue: { name: 'General Fatigue', category: 'Energy & Fatigue' },
                pem: { name: 'Post-Exertional Malaise', category: 'Energy & Fatigue' },
                sleep_issues: { name: 'Sleep Problems', category: 'Energy & Fatigue' },
                pots: { name: 'POTS Symptoms', category: 'Cardiovascular' },
                chest_pain: { name: 'Chest Pain', category: 'Cardiovascular' },
                palpitations: { name: 'Heart Palpitations', category: 'Cardiovascular' }
            };
            
            return symptoms.map(([symptomId, severity]) => {
                const symptomInfo = symptomNames[symptomId];
                if (symptomInfo) {
                    return { 
                        ...symptomInfo, 
                        severity,
                        id: symptomId
                    };
                }
                return null;
            }).filter(Boolean);
        }

        function viewDay(date) {
            saveDayData();
            currentDate = date;
            document.getElementById('date-input').value = date;
            
            // Switch to daily view
            document.querySelectorAll('.view-tab').forEach(t => t.classList.remove('active'));
            document.querySelector('[data-view="daily"]').classList.add('active');
            currentView = 'daily';
            
            loadDayData();
            updateViews();
        }

        // Make viewDay function global for onclick handlers
        window.viewDay = viewDay;
    </script>
</body>
</html>